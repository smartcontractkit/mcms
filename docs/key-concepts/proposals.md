# MCMS Proposal Format

A **proposal** in the context of the MCMS (Multi-Chain Management System) platform
is a structured document that defines a set of transactions to be executed
across multiple blockchains. Proposals are typically created to carry out
specific operations, like contract interactions or asset transfers, in a
coordinated manner across different chains.

### General Considerations

- **MCMS Only Implementation**: This format is used specifically for teams that control only the MCMS, without
  additional layers like RBACTimelock in their structure. Check [RBAC Timelock proposal](./proposal-timelock.md)
- **Human-Readable Breadcrumbs**: Non-signed metadata such as `contractType` and `tags` can be used to give additional
  context to the operations, especially during debugging or reviews. Included in both timelock and non-timelock proposal
  types.
- **Description**: The `description` field provides essential context and should be generated through pipelines to
  ensure consistency.
- **ContractTypes / ABI Pointers**: These fields allow developers to add helpful references to contracts' ABI, which can
  simplify operations like decoding payloads.
- **Tags**: Tags can help in filtering or categorizing operations, adding flexibility to proposal management.

<!-- panels:start -->

<!-- div:left-panel -->

### JSON Proposal Structure

```json
{
  "version": "<PROPOSAL_FORMAT_VERSION>",
  "validUntil": "<UINT256_TIMESTAMP>",
  "description": "<Human-readable (but generated) description>",
  "signatures": [
    "<SIGNATURE_ONE>",
    "<SIGNATURE_TWO>",
    "<SIGNATURE_THREE>"
  ],
  "chain_metadata": {
    "<CHAIN_SELECTOR>": {
      "startingOpCount": "<STARTING_OP_COUNT>",
      "mcmAddress": "<MCM_ADDRESS>"
    }
  },
  "transactions": [
    {
      "chain": "<CHAIN_SELECTOR>",
      "to": "<TARGET_CONTRACT>",
      "payload": "<HEX_PAYLOAD>",
      "additionalFields": "<object>",
      "contractType": "<CONTRACT_TYPE>",
      "tags": [
        "<EXAMPLE_TAG>"
      ]
    },
    {
      "chain": "<CHAIN_SELECTOR>",
      "to": "<TARGET_CONTRACT>",
      "payload": "<HEX_PAYLOAD>",
      "additionalFields": "<object>",
      "contractType": "<CONTRACT_TYPE>",
      "tags": [
        "<EXAMPLE_TAG>"
      ]
    }
  ]
}
```

<!-- div:right-panel -->

### Field Descriptions & General Considerations

- **version**: Defines the format version of the proposal to ensure backward compatibility for different parsers.

- **validUntil**: A timestamp (in UINT256 format) that specifies the proposal's expiration. If the proposal is not
  executed before this time, it becomes invalid.

- **description**: A human-readable (and typically generated) description intended to give signers context for the
  proposed change. This can be templatized and generated by pipelines.

- **signatures**: A list of cryptographic signatures by signers, where each element represents one signature (
  e.g., `"SIGNATURE_ONE"`, `"SIGNATURE_TWO"`, `"SIGNATURE_THREE"`). These ensure that the proposal has been agreed upon
  by the necessary parties.

- **chain_metadata**: Contains chain-specific configuration for each blockchain involved in the proposal:
    - **CHAIN_SELECTOR**: The blockchain selector ID, a `uin64` value matching the chain based on
      the [Chain Selectors Repo Structure](https://github.com/smartcontractkit/chain-selectors)
    - **startingOpCount**: Starting operation count, typically used for parallel signing processes.
    - **mcmAddress**: The MCM contract address that will process this proposal on the respective chain.

- **transactions**: A list of transactions to be executed across chains:
    - **chain**: The blockchain identifier for the specific transaction.
    - **to**: The target contract address.
    - **payload**: The encoded payload (hexadecimal) to be sent with the transaction.
    - **additionalFields**: A chain-specific object with data relevant for the execution of operations on each chain.
    - **contractType** (optional): A pointer to the contract's ABI or other relevant metadata.
    - **tags** (optional): Tags are being considered for categorizing or describing transactions. For
      example, `"EXAMPLE_TAG"`.

<!-- panels:end -->